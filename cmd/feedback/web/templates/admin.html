{{define "admin.html"}}{{template "layout.html" .}}{{end}}

{{define "admin.content"}}
<div class="header">
  <div>
    <h1 class="h2">管理员</h1>
    <p class="muted">
      通过管理员密钥进入管理员模式。进入后可在反馈详情页回复用户。
    </p>
  </div>
</div>

{{if .Session.IsAdmin}}
  <div class="panel">
    <div class="row row--between">
      <div>
        <div class="card__title">已进入管理员模式</div>
        <div class="muted">现在去任意反馈详情页即可写回复。</div>
      </div>
      <a class="btn btn--primary" href="/square">去反馈广场</a>
    </div>
  </div>
{{else}}
  <form class="panel form" action="/admin" method="post">
    <label class="field">
      <span class="field__label">管理员密钥</span>
      <input class="input" name="key" placeholder="输入密钥" />
    </label>
    <button class="btn btn--primary" type="submit">进入</button>
    <div class="hint">提示：密钥配置在环境变量 `ADMIN_KEY`。</div>
  </form>
{{end}}
{{end}}

