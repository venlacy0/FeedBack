{{define "square.html"}}{{template "layout.html" .}}{{end}}

{{define "square.content"}}
<div class="header">
  <div>
    <h1 class="h2">反馈广场</h1>
    <p class="muted">公开反馈对所有人可见。支持标题/正文模糊搜索。</p>
  </div>
</div>

<form class="panel panel--tight" action="/square" method="get">
  <label class="field">
    <span class="field__label">搜索</span>
    <input class="input" name="q" value="{{.Query}}" placeholder="比如：登录 / 加载慢 / 建议" />
  </label>
  <button class="btn btn--primary" type="submit">搜索</button>
</form>

{{if eq (len .Feedback) 0}}
  <div class="panel">
    <div class="muted">暂无结果。换个关键词试试？</div>
  </div>
{{else}}
  <section class="list">
    {{range .Feedback}}
      <a class="item" href="/square/{{.ID}}">
        <div class="item__main">
          <div class="item__title">{{.Title}}</div>
          <div class="item__excerpt">{{.Content}}</div>
        </div>
        <div class="item__meta">
          <div class="item__user">{{.Username}}</div>
          <div class="item__time">{{.CreatedAt.Format "2006-01-02 15:04"}}</div>
        </div>
      </a>
    {{end}}
  </section>
{{end}}
{{end}}

